{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AIP-0.1: Provider Notification Message",
  "description": "IPFS Pubsub notification message sent by consumer to provider after creating on-chain transaction",
  "type": "object",
  "required": [
    "type",
    "version",
    "txId",
    "cid",
    "consumer",
    "provider",
    "chainId",
    "timestamp",
    "nonce",
    "signature"
  ],
  "properties": {
    "type": {
      "type": "string",
      "const": "agirails.notification.v1",
      "description": "Message type identifier"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version (e.g., 1.0.0)"
    },
    "supportedVersions": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^\\d+\\.\\d+\\.\\d+$"
      },
      "description": "List of versions sender can process in responses"
    },
    "txId": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{64}$",
      "description": "On-chain transaction ID (bytes32)"
    },
    "cid": {
      "type": "string",
      "pattern": "^[a-z2-7]{59}$",
      "description": "IPFS CID v1 (base32) of AIP-1 request metadata"
    },
    "consumer": {
      "type": "string",
      "pattern": "^did:ethr:(0x)?[a-fA-F0-9]{40}$",
      "description": "Consumer DID (requester)"
    },
    "provider": {
      "type": "string",
      "pattern": "^did:ethr:(0x)?[a-fA-F0-9]{40}$",
      "description": "Provider DID (service provider)"
    },
    "chainId": {
      "type": "integer",
      "enum": [84532, 8453],
      "description": "Chain ID (84532 = Base Sepolia, 8453 = Base Mainnet)"
    },
    "timestamp": {
      "type": "integer",
      "minimum": 0,
      "description": "Unix timestamp (seconds) when message was created"
    },
    "nonce": {
      "type": "integer",
      "minimum": 1,
      "description": "Monotonic nonce scoped to (consumer DID, agirails.notification.v1)"
    },
    "signature": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{130}$",
      "description": "EIP-712 signature (65 bytes, hex-encoded)"
    }
  },
  "additionalProperties": false
}
